# Влияние переезда в крупный город на уровень заработной платы

Исследовательский проект, посвященный оценке причинно-следственного эффекта переезда в центральный город (SMSA central) на заработную плату жителей.

## Описание проекта

Этот проект представляет собой эмпирическое исследование влияния переезда в крупный город (центральный статистический район — SMSA central) на уровень заработной платы человека. Анализ основан на панельных данных с 1979 по 1994 год и включает в себя проверку баланса наблюдаемых характеристик, оценку эффекта с помощью парной регрессии, методов мэтчинга (propensity score matching), взвешивания по обратной вероятности (IPW) и Double LASSO.

## Основные исследовательские вопросы

- Как переезд в крупный город влияет на заработную плату?
- Какие характеристики индивидуумов наиболее важны при оценке этого эффекта?
- Какой методологический подход дает наиболее надежные результаты?

## Методология

### 1. Анализ баланса ковариат
Проверка сопоставимости групп по ключевым характеристикам:
- Размер семьи
- Образование
- Способности (AFQT2)
- Образование родителей (HGT_mother, HGT_father)
- Уверенность в себе
- Размер фирмы
- Отношение к риску

**Результаты:** Обнаружен значительный дисбаланс по показателям образования и способностей, что требует применения методов коррекции.

### 2. Парная регрессия
Простая регрессия без контроля ковариат выявила смещенную оценку эффекта (279.59 у.е.), которая не учитывает различия между группами.

### 3. Matching (сопоставление ближайшего соседа)
Использован метод ближайшего соседа для подбора сопоставимых пар между группами переехавших и контрольной группой. Результат показал статистически незначимый эффект, однако с сильным уменьшением размера выборки (с 1036 до 43 наблюдений в контрольной группе).

### 4. Inverse Probability Weighting (IPW)
Метод взвешивания по обратной вероятности лечения на основе propensity score. Этот подход позволил сохранить большую часть выборки и получить более надежные оценки.

**Ключевой результат:** Переезд в central повышает заработную плату на **188 у.е.** (статистически значимо, p < 0.001).

**Значимые факторы:**
- Образование (p = 0.005)
- Образование матери (p = 0.047)
- Образование отца (p < 0.001)
- Уверенность в себе (p = 0.037)
- Отношение к риску (p = 0.004)

### 5. Double Lasso (машинное обучение)
Применен метод для автоматического отбора наиболее релевантных ковариат. Модель выбрала способности (AFQT2) и образование родителей как наиболее важные факторы. Оценка эффекта (115.4 у.е.) оказалась статистически незначимой.

### 6. Бутстраповский доверительный интервал
Построен интервал на основе 1000 бутстраповских подвыборок для оценки из метода IPW. Интервал показывает, что истинное значение эффекта находится в диапазоне с 95%-ной вероятностью.
Проект реализован в **R**

## Ключевые выводы

1. **Простая регрессия смещена:** Наивная оценка (279.59 у.е.) переоценивает эффект из-за отсутствия контроля ковариат.
2. **Matching требует больших потерь в выборке:** Хотя улучшает сопоставимость групп, сильно сокращает количество наблюдений.
3. **IPW — оптимальный выбор:** Позволяет сохранить выборку и получить значимый результат (188 у.е.).
4. **Эффект модерируется образованием:** Образование как индивида, так и его родителей значительно влияет на зарплату.
5. **Double Lasso выявляет избыточные переменные:** Не все контрольные переменные одинаково важны для объяснения исхода.

## Файлы проекта

- `Vliianie-pereezda-na-uroven-zarplaty.R` — основной R-скрипт со всеми расчетами
- `Podrobnyi-khod-resheniia.pdf` — подробное описание методологии и результатов
- `wage_gap.xlsx` — исходные данные (требуются для запуска)







